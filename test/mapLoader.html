<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body
        {
            margin:0%;
        }
    </style>
</head>
<body>
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

    <script type="importmap">
        {
            "imports": {
                "three": "../three.module.js",
                "three/addons/": "../jsm/"
            }
        }
    </script>
    <script type="module">
        //https://threejs.org/examples/?q=water#webgl_shaders_ocean
        //https://petoalbert.github.io/2016/10/22/grassfield.html
        import * as THREE from "three";
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        let scene = new THREE.Scene();
        scene.background = new THREE.Color(0xbfd1e5);

        let camera = new THREE.PerspectiveCamera(75,window.innerWidth / window.innerHeight,0.2,5000);
        camera.position.set(0,10,10);
        camera.lookAt(0,10,10);
        camera.rotation.y += 30;

        let hemiLight = new THREE.HemisphereLight(0xffffff,0xffffff,2);
        hemiLight.color.setHSL(0.6,0.6,0.6);
        hemiLight.groundColor.setHSL(0.1,1,0.4);
        hemiLight.position.set(0,50,0);
        scene.add(hemiLight);
        let dirLight = new THREE.DirectionalLight(0xffffff,1);
        dirLight.color.setHSL(0.1,1,0);
        dirLight.position.set(-1,1.75,1);
        dirLight.position.multiplyScalar(100);
        scene.add(dirLight);

        dirLight.castShadow = true;
        dirLight.shadow.mapSize.width = 2048;
        dirLight.shadow.mapSize.height = 2048;

        let d = 50;
        dirLight.shadow.camera.left = -d;
        dirLight.shadow.camera.right = d;
        dirLight.shadow.camera.top = d;
        dirLight.shadow.camera.bottom = -d;

        dirLight.shadow.camera.far = 13500;
        let renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setClearColor(0xbfd1e5);
        renderer.setSize(window.innerWidth,window.innerHeight);
        document.body.appendChild(renderer.domElement);

        renderer.shadowMap.enable = true;
        const loader = new GLTFLoader();
        loader.load(
            // resource URL
            'map.gltf',
            // called when the resource is loaded
            function ( gltf ) {

                scene.add( gltf.scene );

                gltf.animations; // Array<THREE.AnimationClip>
                gltf.scene; // THREE.Group
                gltf.scenes; // Array<THREE.Group>
                gltf.cameras; // Array<THREE.Camera>
                gltf.asset; // Object
            },
            // called while loading is progressing
            function ( xhr ) {

                console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );

            },
            // called when loading has errors
            function ( error ) {

                console.log( error );

            }
        );

        function animate()
        {
            requestAnimationFrame(animate);
            renderer.render(scene,camera);
        }

        animate();
    </script>
</body>
</html>